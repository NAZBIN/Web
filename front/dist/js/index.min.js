function Banner(){this.bannerGroup=$("#banner-group"),this.index=1,this.leftArrow=$(".left-arrow"),this.rightArrow=$(".right-arrow"),this.BannerUl=$("#banner-ul"),this.liList=this.BannerUl.children("li"),this.listCount=this.liList.length,this.pageControl=$(".page-control"),this.bannerwidth=798}function Index(){var n=this;n.page=2,n.category_id=0,n.loadBtn=$("#load-more-btn")}Banner.prototype.initBanner=function(){var n=this,t=n.liList.eq(0).clone(),e=n.liList.eq(n.listCount-1).clone();n.BannerUl.append(t),n.BannerUl.prepend(e),n.BannerUl.css({width:n.bannerwidth*(n.listCount+2),left:-n.bannerwidth})},Banner.prototype.initPageControl=function(){for(var n=this,t=0;t<n.listCount;t++){var e=$("<li></li>");n.pageControl.append(e),0===t&&e.addClass("active")}n.pageControl.css({width:10*n.listCount+16+16*(n.listCount-1)})},Banner.prototype.animate=function(){var n=this;n.BannerUl.stop().animate({left:-798*n.index},500);var t=n.index;t=0===t?n.listCount-1:t===n.listCount+1?0:n.index-1,n.pageControl.children("li").eq(t).addClass("active").siblings().removeClass("active")},Banner.prototype.toggleArrow=function(n){var t=this;n?(t.leftArrow.show(),t.rightArrow.show()):(t.leftArrow.hide(),t.rightArrow.hide())},Banner.prototype.loop=function(){var n=this;this.timer=setInterval(function(){n.index>=n.listCount+1?(n.BannerUl.css({left:-n.bannerwidth}),n.index=2):n.index++,n.animate()},2e3)},Banner.prototype.listenBannerHover=function(){var n=this;this.bannerGroup.hover(function(){clearInterval(n.timer),n.toggleArrow(!0)},function(){n.loop(),n.toggleArrow(!1)})},Banner.prototype.listenBannerClick=function(){var n=this;n.leftArrow.click(function(){0===n.index?(n.BannerUl.css({left:-n.listCount*n.bannerwidth}),n.index=n.listCount-1):n.index--,n.animate()}),n.rightArrow.click(function(){n.index===n.listCount+1?(n.BannerUl.css({left:-n.bannerwidth}),n.index=2):n.index++,n.animate()})},Banner.prototype.listenpageControl=function(){var e=this;e.pageControl.children("li").each(function(n,t){$(t).click(function(){e.index=n,e.animate()})})},Banner.prototype.run=function(){this.initBanner(),this.initPageControl(),this.loop(),this.listenBannerHover(),this.listenBannerClick(),this.listenpageControl()},Index.prototype.listenLoadMoreEvent=function(){var i=this,r=$("#load-more-btn");r.click(function(){xfzajax.get({url:"/news/list/",data:{p:i.page,category_id:i.category_id},success:function(n){if(200===n.code){var t=n.data;if(0<t.length){var e=template("news-item",{newses:t});$(".list-inner-group").append(e),i.page++}else r.hide()}}})})},Index.prototype.listenLoadCategoryEvent=function(){var a=this;$(".list-tab").children().click(function(){var r=$(this),o=r.attr("data-category");xfzajax.get({url:"/news/list/",data:{category_id:o,p:1},success:function(n){if(200===n.code){var t=n.data,e=template("news-item",{newses:t}),i=$(".list-inner-group");i.empty(),i.append(e),a.page=2,a.category_id=o,r.addClass("active").siblings().removeClass("active"),a.loadBtn.show()}}})})},Index.prototype.run=function(){this.listenLoadCategoryEvent(),this.listenLoadMoreEvent()},$(function(){(new Banner).run(),(new Index).run()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbIkJhbm5lciIsInRoaXMiLCJiYW5uZXJHcm91cCIsIiQiLCJpbmRleCIsImxlZnRBcnJvdyIsInJpZ2h0QXJyb3ciLCJCYW5uZXJVbCIsImxpTGlzdCIsImNoaWxkcmVuIiwibGlzdENvdW50IiwibGVuZ3RoIiwicGFnZUNvbnRyb2wiLCJiYW5uZXJ3aWR0aCIsIkluZGV4Iiwic2VsZiIsInBhZ2UiLCJjYXRlZ29yeV9pZCIsImxvYWRCdG4iLCJwcm90b3R5cGUiLCJpbml0QmFubmVyIiwiZmlyc3RQYWdlIiwiZXEiLCJjbG9uZSIsImxhc3RQYWdlIiwiYXBwZW5kIiwicHJlcGVuZCIsImNzcyIsIndpZHRoIiwibGVmdCIsImluaXRQYWdlQ29udHJvbCIsImkiLCJjaXJjbGUiLCJhZGRDbGFzcyIsImFuaW1hdGUiLCJzdG9wIiwic2libGluZ3MiLCJyZW1vdmVDbGFzcyIsInRvZ2dsZUFycm93IiwiaXNTaG93Iiwic2hvdyIsImhpZGUiLCJsb29wIiwidGltZXIiLCJzZXRJbnRlcnZhbCIsImxpc3RlbkJhbm5lckhvdmVyIiwiaG92ZXIiLCJjbGVhckludGVydmFsIiwibGlzdGVuQmFubmVyQ2xpY2siLCJjbGljayIsImxpc3RlbnBhZ2VDb250cm9sIiwiZWFjaCIsIm9iaiIsInJ1biIsImxpc3RlbkxvYWRNb3JlRXZlbnQiLCJ4ZnphamF4IiwiZ2V0IiwidXJsIiwiZGF0YSIsInAiLCJzdWNjZXNzIiwicmVzdWx0IiwibmV3c2VzIiwidHBsIiwidGVtcGxhdGUiLCJsaXN0ZW5Mb2FkQ2F0ZWdvcnlFdmVudCIsImxpIiwiYXR0ciIsIm5ld3NMaXN0R3JvdXAiLCJlbXB0eSJdLCJtYXBwaW5ncyI6IkFBQ0EsU0FBU0EsU0FDTEMsS0FBS0MsWUFBZUMsRUFBRSxpQkFDdEJGLEtBQUtHLE1BQVEsRUFDYkgsS0FBS0ksVUFBWUYsRUFBRSxlQUNuQkYsS0FBS0ssV0FBYUgsRUFBRSxnQkFDcEJGLEtBQUtNLFNBQVdKLEVBQUUs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QU1DLFNBQVMsWUFBWSxDQUFDRixPQUFTQSxJQUVyQ00sRUFBZ0JqRSxFQUFFLHFCQUN0QmlFLEVBQWNDLFFBQ2RELEVBQWMzQyxPQUFPc0MsR0FDckJoRCxFQUFLQyxLQUFLLEVBQ1ZELEVBQUtFLFlBQWNBLEVBRW5CaUQsRUFBR2pDLFNBQVMsVUFBVUcsV0FBV0MsWUFBWSxVQUM3Q3RCLEVBQUtHLFFBQVFzQixjQVNqQzFCLE1BQU1LLFVBQVVrQyxJQUFNLFdBQ1BwRCxLQUNOZ0UsMEJBRE1oRSxLQUVOcUQsdUJBR1RuRCxFQUFFLFlBQ2UsSUFBSUgsUUFDVnFELE9BQ0ssSUFBSXZDLE9BQ1Z1QyIsImZpbGUiOiJpbmRleC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJcclxuZnVuY3Rpb24gQmFubmVyKCkge1xyXG4gICAgdGhpcy5iYW5uZXJHcm91cCAgPSAkKFwiI2Jhbm5lci1ncm91cFwiKTtcclxuICAgIHRoaXMuaW5kZXggPSAxO1xyXG4gICAgdGhpcy5sZWZ0QXJyb3cgPSAkKFwiLmxlZnQtYXJyb3dcIik7XHJcbiAgICB0aGlzLnJpZ2h0QXJyb3cgPSAkKFwiLnJpZ2h0LWFycm93XCIpO1xyXG4gICAgdGhpcy5CYW5uZXJVbCA9ICQoXCIjYmFubmVyLXVsXCIpO1xyXG4gICAgdGhpcy5saUxpc3QgPSB0aGlzLkJhbm5lclVsLmNoaWxkcmVuKFwibGlcIik7XHJcbiAgICB0aGlzLmxpc3RDb3VudCA9IHRoaXMubGlMaXN0Lmxlbmd0aDtcclxuICAgIHRoaXMucGFnZUNvbnRyb2wgPSAkKFwiLnBhZ2UtY29udHJvbFwiKTtcclxuICAgIHRoaXMuYmFubmVyd2lkdGggPSA3OTg7XHJcblxyXG5cclxuXHJcblxyXG59XHJcbkJhbm5lci5wcm90b3R5cGUuaW5pdEJhbm5lciA9IGZ1bmN0aW9uKCl7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICB2YXIgZmlyc3RQYWdlID0gc2VsZi5saUxpc3QuZXEoMCkuY2xvbmUoKTtcclxuICAgIHZhciBsYXN0UGFnZSAgPSBzZWxmLmxpTGlzdC5lcShzZWxmLmxpc3RDb3VudC0xKS5jbG9uZSgpO1xyXG4gICAgc2VsZi5CYW5uZXJVbC5hcHBlbmQoZmlyc3RQYWdlKTtcclxuICAgIHNlbGYuQmFubmVyVWwucHJlcGVuZChsYXN0UGFnZSk7XHJcbiAgICBzZWxmLkJhbm5lclVsLmNzcyh7XCJ3aWR0aFwiOnNlbGYuYmFubmVyd2lkdGgqKHNlbGYubGlzdENvdW50KzIpLCdsZWZ0Jzotc2VsZi5iYW5uZXJ3aWR0aH0pO1xyXG5cclxuXHJcblxyXG5cclxufTtcclxuLy/liqjmgIHnlJ/miJBsaeagh+etvlxyXG5CYW5uZXIucHJvdG90eXBlLmluaXRQYWdlQ29udHJvbCA9IGZ1bmN0aW9uKCl7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICBmb3IodmFyIGk9MDtpPHNlbGYubGlzdENvdW50O2krKyl7XHJcbiAgICAgICAgdmFyIGNpcmNsZSA9ICQoXCI8bGk+PC9saT5cIik7XHJcbiAgICAgICAgc2VsZi5wYWdlQ29udHJvbC5hcHBlbmQoY2lyY2xlKTtcclxuICAgICAgICBpZihpPT09MCl7XHJcbiAgICAgICAgICAgIGNpcmNsZS5hZGRDbGFzcyhcImFjdGl2ZVwiKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBzZWxmLnBhZ2VDb250cm9sLmNzcyh7XCJ3aWR0aFwiOnNlbGYubGlzdENvdW50KjEwKzIqOCsxNiooc2VsZi5saXN0Q291bnQtMSl9KTtcclxufTtcclxuXHJcblxyXG5CYW5uZXIucHJvdG90eXBlLmFuaW1hdGUgPSBmdW5jdGlvbigpe1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgc2VsZi5CYW5uZXJVbC5zdG9wKCkuYW5pbWF0ZSh7XCJsZWZ0XCI6LTc5OCpzZWxmLmluZGV4fSw1MDApO1xyXG4gICAgdmFyIGluZGV4ID0gc2VsZi5pbmRleDtcclxuICAgIGlmKGluZGV4ID09PSAwKXtcclxuICAgICAgICBpbmRleCA9IHNlbGYubGlzdENvdW50LTE7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmKGluZGV4ID09PSBzZWxmLmxpc3RDb3VudCsxKXtcclxuICAgICAgICBpbmRleCA9IDA7XHJcbiAgICB9XHJcbiAgICBlbHNle1xyXG4gICAgICAgIGluZGV4ID0gc2VsZi5pbmRleC0xO1xyXG4gICAgfVxyXG5cclxuICAgIHNlbGYucGFnZUNvbnRyb2wuY2hpbGRyZW4oXCJsaVwiKS5lcShpbmRleClcclxuICAgICAgICAuYWRkQ2xhc3MoXCJhY3RpdmVcIikuc2libGluZ3MoKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKTtcclxufTtcclxuXHJcblxyXG5CYW5uZXIucHJvdG90eXBlLnRvZ2dsZUFycm93ID0gZnVuY3Rpb24oaXNTaG93KXtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIGlmKGlzU2hvdyl7XHJcbiAgICAgICAgc2VsZi5sZWZ0QXJyb3cuc2hvdygpO1xyXG4gICAgICAgIHNlbGYucmlnaHRBcnJvdy5zaG93KCk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICBzZWxmLmxlZnRBcnJvdy5oaWRlKCk7XHJcbiAgICAgICAgc2VsZi5yaWdodEFycm93LmhpZGUoKTtcclxuICAgIH1cclxufTtcclxuQmFubmVyLnByb3RvdHlwZS5sb29wPWZ1bmN0aW9uKCl7XHJcbiAgICAvL+afpeaJvuWFg+e0oFxyXG4gICAgdmFyIHNlbGY9dGhpcztcclxuICAgIC8vYmFubmVyVWwuY3NzKHtcImxlZnRcIjotNzk4fSk7Ly/ov5nnp43mlrnlvI/mmK/kuIDmraXliLDkvY1cclxuICAgIHRoaXMudGltZXI9c2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmKHNlbGYuaW5kZXg+PShzZWxmLmxpc3RDb3VudCsxKSl7XHJcbiAgICAgICAgICAgIHNlbGYuQmFubmVyVWwuY3NzKHtcImxlZnRcIjotc2VsZi5iYW5uZXJ3aWR0aH0pO1xyXG4gICAgICAgICAgICBzZWxmLmluZGV4PTI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgIHNlbGYuaW5kZXgrKztcclxuICAgICAgICB9XHJcbiAgICAgICAgc2VsZi5hbmltYXRlKCk7XHJcbiAgICB9LDIwMDApO1xyXG59O1xyXG5cclxuLy/nm5HlkKxob3ZlcuS6i+S7tlxyXG5CYW5uZXIucHJvdG90eXBlLmxpc3RlbkJhbm5lckhvdmVyID0gZnVuY3Rpb24oKXtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHRoaXMuYmFubmVyR3JvdXAuaG92ZXIoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8v56ys5LiA5Liq5Ye95pWw77yM6byg5qCH56e75Yqo5YiwYmFubmVy5LiK5Lya5omn6KGM55qE5Ye95pWwXHJcbiAgICAgICAgY2xlYXJJbnRlcnZhbChzZWxmLnRpbWVyKTtcclxuICAgICAgICBzZWxmLnRvZ2dsZUFycm93KHRydWUpO1xyXG4gICAgfSxmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgc2VsZi5sb29wKCk7XHJcbiAgICAgICAgc2VsZi50b2dnbGVBcnJvdyhmYWxzZSk7XHJcbiAgICB9KVxyXG5cclxuXHJcbn07XHJcbkJhbm5lci5wcm90b3R5cGUubGlzdGVuQmFubmVyQ2xpY2sgPSBmdW5jdGlvbigpe1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgc2VsZi5sZWZ0QXJyb3cuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmKHNlbGYuaW5kZXg9PT0wKXtcclxuICAgICAgICAgICAgLy8gc2VsZi5pbmRleCA9IHNlbGYubGlzdENvdW50O1xyXG4gICAgICAgICAgICBzZWxmLkJhbm5lclVsLmNzcyh7XCJsZWZ0XCI6LXNlbGYubGlzdENvdW50KnNlbGYuYmFubmVyd2lkdGh9KTtcclxuICAgICAgICAgICAgc2VsZi5pbmRleCA9IHNlbGYubGlzdENvdW50IC0gMTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgc2VsZi5pbmRleC0tO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzZWxmLmFuaW1hdGUoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHNlbGYucmlnaHRBcnJvdy5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYoc2VsZi5pbmRleD09PShzZWxmLmxpc3RDb3VudCsxKSl7XHJcbiAgICAgICAgICAgIC8vIHNlbGYuaW5kZXg9MTtcclxuICAgICAgICAgICAgc2VsZi5CYW5uZXJVbC5jc3Moe1wibGVmdFwiOi1zZWxmLmJhbm5lcndpZHRofSk7XHJcbiAgICAgICAgICAgIHNlbGYuaW5kZXggPSAyO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNle1xyXG4gICAgICAgICAgICBzZWxmLmluZGV4Kys7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICBzZWxmLmFuaW1hdGUoKTtcclxuICAgIH0pO1xyXG59O1xyXG5cclxuQmFubmVyLnByb3RvdHlwZS5saXN0ZW5wYWdlQ29udHJvbCA9IGZ1bmN0aW9uKCl7XHJcblxyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgc2VsZi5wYWdlQ29udHJvbC5jaGlsZHJlbihcImxpXCIpLmVhY2goZnVuY3Rpb24gKGluZGV4LG9iaikge1xyXG4gICAgICAgIC8v5YWI5YyF6KOF5oiQanF1ZXJ5XHJcbiAgICAgICAgJChvYmopLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgc2VsZi5pbmRleCA9IGluZGV4O1xyXG4gICAgICAgICAgICBzZWxmLmFuaW1hdGUoKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxufTtcclxuXHJcblxyXG4vL+WOn+Wei+mTvlxyXG5CYW5uZXIucHJvdG90eXBlLnJ1bj1mdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgdGhpcy5pbml0QmFubmVyKCk7XHJcbiAgICB0aGlzLmluaXRQYWdlQ29udHJvbCgpO1xyXG4gICAgdGhpcy5sb29wKCk7XHJcbiAgICB0aGlzLmxpc3RlbkJhbm5lckhvdmVyKCk7XHJcbiAgICB0aGlzLmxpc3RlbkJhbm5lckNsaWNrKCk7XHJcbiAgICB0aGlzLmxpc3RlbnBhZ2VDb250cm9sKCk7XHJcblxyXG59O1xyXG5cclxuZnVuY3Rpb24gSW5kZXgoKXtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHNlbGYucGFnZSA9IDI7XHJcbiAgICBzZWxmLmNhdGVnb3J5X2lkID0gMDtcclxuICAgIHNlbGYubG9hZEJ0biA9ICQoXCIjbG9hZC1tb3JlLWJ0blwiKTtcclxuICAgIC8v5YmN56uv5a+55pe26Ze06L+b6KGM5qC85byP5YyW55qE5pa55rOV77yaICDljLrliKvkuo5weXRob27lkI7nq6/nmoR0aW1lX2ZpbHRlcui/h+a7pOWZqFxyXG5cclxuXHJcbn1cclxuXHJcbkluZGV4LnByb3RvdHlwZS5saXN0ZW5Mb2FkTW9yZUV2ZW50ID0gZnVuY3Rpb24oKXtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHZhciBsb2FkQnRuID0gJChcIiNsb2FkLW1vcmUtYnRuXCIpO1xyXG4gICAgbG9hZEJ0bi5jbGljayhmdW5jdGlvbiAoKSB7XHJcblxyXG5cclxuICAgICAgICB4ZnphamF4LmdldCh7XHJcbiAgICAgICAgICAgICd1cmwnOicvbmV3cy9saXN0LycsXHJcbiAgICAgICAgICAgICdkYXRhJzp7XHJcbiAgICAgICAgICAgICAgICAncCc6c2VsZi5wYWdlLFxyXG4gICAgICAgICAgICAgICAgJ2NhdGVnb3J5X2lkJzpzZWxmLmNhdGVnb3J5X2lkXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICdzdWNjZXNzJzpmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBpZihyZXN1bHRbJ2NvZGUnXT09PTIwMCl7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5ld3NlcyA9IHJlc3VsdFsnZGF0YSddO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKG5ld3Nlcy5sZW5ndGggPiAwICl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0cGwgPSB0ZW1wbGF0ZShcIm5ld3MtaXRlbVwiLCB7XCJuZXdzZXNcIjogbmV3c2VzfSk7Ly/mi7/liLBodG1s5Luj56CBXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8v5oqK6L+Z6YOo5YiGbGlzdOaLvOaOpeWIsHVsLWxp5ZCO6Z2iXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB1bCA9ICQoXCIubGlzdC1pbm5lci1ncm91cFwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdWwuYXBwZW5kKHRwbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYucGFnZSsrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbG9hZEJ0bi5oaWRlKClcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgIH0pXHJcbn07XHJcblxyXG5JbmRleC5wcm90b3R5cGUubGlzdGVuTG9hZENhdGVnb3J5RXZlbnQgPSBmdW5jdGlvbigpe1xyXG4gICAgLy/ojrflj5bmiYDmnInliIbnsbtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHZhciB0YWJHcm91cCA9ICQoXCIubGlzdC10YWJcIik7XHJcbiAgICB0YWJHcm91cC5jaGlsZHJlbigpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgbGkgPSAkKHRoaXMpO1xyXG4gICAgICAgIHZhciBjYXRlZ29yeV9pZCA9IGxpLmF0dHIoJ2RhdGEtY2F0ZWdvcnknKTtcclxuICAgICAgICB2YXIgcGFnZT0gMTtcclxuICAgICAgICB4ZnphamF4LmdldCh7XHJcbiAgICAgICAgICAgICd1cmwnOicvbmV3cy9saXN0LycsXHJcbiAgICAgICAgICAgICdkYXRhJzp7XHJcbiAgICAgICAgICAgICAgICAnY2F0ZWdvcnlfaWQnOmNhdGVnb3J5X2lkLFxyXG4gICAgICAgICAgICAgICAgJ3AnOnBhZ2VcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJ3N1Y2Nlc3MnOmZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgIGlmIChyZXN1bHRbJ2NvZGUnXT09PTIwMCl7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5ld3NlcyA9IHJlc3VsdFsnZGF0YSddO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB0cGwgPSB0ZW1wbGF0ZShcIm5ld3MtaXRlbVwiLHtcIm5ld3Nlc1wiOm5ld3Nlc30pO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vZW1wdHnlj6/ku6XlsIblvZPliY3ov5nkuKrmoIfnrb7kuIvnmoTmiYDmnInlrZDlhYPntKDpg73liKDmjolcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbmV3c0xpc3RHcm91cCA9ICQoXCIubGlzdC1pbm5lci1ncm91cFwiKTtcclxuICAgICAgICAgICAgICAgICAgICBuZXdzTGlzdEdyb3VwLmVtcHR5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3c0xpc3RHcm91cC5hcHBlbmQodHBsKTtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLnBhZ2U9MjtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLmNhdGVnb3J5X2lkID0gY2F0ZWdvcnlfaWQ7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGxpLmFkZENsYXNzKCdhY3RpdmUnKS5zaWJsaW5ncygpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLmxvYWRCdG4uc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgIH0pXHJcbn07XHJcblxyXG5cclxuXHJcbkluZGV4LnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbigpe1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgc2VsZi5saXN0ZW5Mb2FkQ2F0ZWdvcnlFdmVudCgpO1xyXG4gICAgc2VsZi5saXN0ZW5Mb2FkTW9yZUV2ZW50KCk7XHJcbn07XHJcblxyXG4kKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBiYW5uZXIgPSBuZXcgQmFubmVyKCk7XHJcbiAgICBiYW5uZXIucnVuKCk7XHJcbiAgICB2YXIgaW5kZXggPSBuZXcgSW5kZXgoKTtcclxuICAgIGluZGV4LnJ1bigpXHJcbn0pOyJdfQ==
